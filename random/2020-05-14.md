# 2020-05-14

|Time (UTC)|Icon|Name|Message|
|---|---|---|---|
|13:51|![](https://secure.gravatar.com/avatar/3f82b853a23d9a6d1ce612d83f3a3a54.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0008-72.png)|Atsushi Shimono|JLReq TFの方にはそのうち流すつもりですが、こういう議論が始まっております。（メモとして<br><https://github.com/w3c/css-print/issues/3><br><blockquote>This extensive issue is a draft specifications for notes creation and positioning in continuous and paged media.<br><br>This draft is based on:<br><br>• The `note()` value, that you can use in the content property to declare elements as notes;<br>• An extention of the `element()` value to place the element removed from the flow (_ie_ the note) in a specific place of the same document,<br>• The `@note-area` at-rule that can be used to display notes in a page;<br>• The `::note-area` pseudo-element to create end-notes for any block elements.<br><br>*Table of Contents*<br><br>1. Types of notes<br>2. Specifications W3C<br>3. Proposal: pattern to create notes  <br>    3.1. Global pattern  <br>    3.2. Clarification about HTML elements<br>4. Create notes with CSS  <br>    4.1. The ‘note()’ value  <br>    4.2. The ‘element()’ value  <br>    4.3 The note counter  <br>    4.4 The `::note-call` pseudo element  <br>    4.5 The `::note-marker` pseudo element  <br>    4.6 The ::note-callback pseudo element<br>5. Page note areas  <br>    5.1 Positioning schemes of note area  <br>    5.2. Multiple notes areas in a page  <br>    5.3. Notes for multi-column layout  <br>    5.4. `@footnote` special at-rule<br>6. The `::note-area` pseudo element<br>7. Notes policy<br><br>*1. Types of notes*<br><br>For now, the W3C specifications only allow the creation of footnotes, as described in the <https://www.w3.org/TR/css-gcpm-3/|CSS Generated Content for Paged Media Module (css-gcpm-3)>. But we know that designers and editors like to be able like to make use of all kinds of notes. You can find some examples here: <https://www.w3.org/XML/2015/02/footnote-examples/|https://www.w3.org/XML/2015/02/footnote-examples/>. To name a few:<br><br>*2. Specifications W3C*<br><br>A part of the <https://www.w3.org/TR/css-gcpm-3/#footnotes|CSS Generated Content for Paged Media Module> (css-gcpm-3) is dedicated to footnotes. The first section defines <https://www.w3.org/TR/css-gcpm-3/#footnote-terms|the terms> of the footnote objects. These definitions can be applied to all types of notes, thus we’ll keep the same terms but will while removing the prefix “foot”, for the rest of this issue discussion:<br><br><blockquote>*Note element*: The element containing the content of the note, which will be removed from the flow and displayed as a note.<br><br>*Note marker*: (also known as note number): A number or symbol adjacent to the note body, identifying the particular note. The note marker should use the same number or symbol as the corresponding note call, although the marker may contain additional punctuation.<br><br>*Note body* : The note marker is placed before the note element, and together they represent the note body, which will be placed in the note area.<br><br>*Note callout* (also known as note reference): A number or symbol, found in the main text, which points to the note body.<br><br>*Note area*: The page area used to display notes.<br><br>*Note rule*: (also known as note separator): A horizontal rule is often used to separate the note area from the rest of the page. The separator (and the entire note area) cannot be rendered on a page with no notes.</blockquote>The specification also describes how to create footnotes in a page with the following code:<br><br><pre>@page {<br>  @footnote {<br>    float: bottom;<br>    /* style of footnote area */<br>  }<br>}<br><br>span.footnote { <br>	/* Display span as footnote */<br>	float: footnote; <br>}</pre><br><br>This code also creates the special <https://www.w3.org/TR/css-gcpm-3/#footnote-counters|footnote counter> and special pseudo-elements for <https://www.w3.org/TR/css-gcpm-3/#footnote-call|footnote calls> (`::footnote-call`) and <https://www.w3.org/TR/css-gcpm-3/#footnote-marker|footnote markers> (`::footnote-marker`). The position, size and styles of the footnote area are defined by the `@footnote` declaration. The specification does not set precise limits, <https://www.w3.org/TR/css-gcpm-3/#footnote-area|only a couple of paragraphs and a lot of issues and unanswered questions>. The advantage is that *we can do many proposals without conflicting with the current specifications.*<br><br>In <https://www.w3.org/TR/css-gcpm-3/|css-gcpm-3>, there is this issue:<br><br><blockquote>Issue 2: Why is `float: bottom` used with the footnote area? Floating footnotes to the footnote area, and then floating the footnote area itself, seems overly complex, given that implementations don’t allow the footnote area to float anywhere else. Note that some implementations do allow the footnote area to be absolutely positioned. (<https://www.w3.org/TR/css-gcpm-3/|https://www.w3.org/TR/css-gcpm-3/>)</blockquote>We agree that unsing double float declaration is complex. But a mechanism is needed to move the note element into a specific area of the page or the document. To do this, we can take inspiration from a mechanism already present in the draft of the paged media specifications, the <https://www.w3.org/TR/css-gcpm-3/#running-elements|running element>: by adding the `position: running()` declaration, we can remove an element from the flow to reuse it in multiple places, perfect for the running heads of a book for example.<br><br>For the notes, we’d like to propose a new way to create and place notes, based on new values (`notes()` and `element()`) for properties already in the CSS specifications (`position` and `content`).<br><br>*3. Proposal: pattern to create notes*<br>*3.1. Global pattern*<br><br>Notes are always dependent on a principal flow, but they are out-of-flow elements, such as an aside. This is ancillary content that may be moved to the bottom of the page, to its margins, or to another section of the document. A note is created when the content is moved to a specific area of the document, leaving a reference indicator behind.<br><br>For all types of notes, we can see a pattern to build them:<br><br>1. Declaring that an element of a flow is a note.<br>2. Remove the item from the flow.<br>3. Leave a note reference indicator in its place, which points to the moved note element - this is an explicit link from a location in the document to a note element.<br>4. Place the note element and its children in a special area with all the other notes of the page or the document, in the order of appearance in the flow.<br>5. Create a marker before the note that matches the note call.<br>6. Place the note area in the page with CSS layout facilities according to a position scheme.<br>7. (If paged media) If the note overflows the note area, move the items to the next page in the equivalent area, according to note policy.<br><br>*3.2. Clarification about HTML elements*<br><br>The W3C doesn't provide a dedicated way to tag notes in HTML. Some discussions in the mailing list of the W3C or whatwg, or in blog articles, suggest different ways but none of them seem to have unanimous agreement.<br><br>*In use*<br><br>In the meantime, there are two most commonly used methods of adding notes:<br><br>• It's common to see link elements with `href` attrbute pointing to sections of a page with fragmented URLs. This mechanism provides some issues pointed out by <https://www.w3.org/Bugs/Public/show_bug.cgi?id=13666|Greg Lowney> in terms of accessibility. This also poses problems with more complex layouts. If the notes elements are presented in a list, it becomes necessary to transform the DOM to place them in the manner of a side note, end notes or footnotes (both for continuous and/or paged media).<br>• Another way would be to use some `&lt;span&gt;` elements directly in paragraphs to encapsulate note elements in the place where they appear. This is the method used in examples in the <https://www.w3.org/TR/css-gcpm-3/#creating-footnotes|css-gcpm-3 draft>.<br><br>*In unofficial specifications*<br><br>David MacDonald and Shane McCarron propose specifics `&lt;note&gt;` , `&lt;notegroup&gt;`and `&lt;refnote&gt;` elements in some <http://spec-ops.github.io/html-note/index.html|unofficial specifications>. One part of the document presents <http://spec-ops.github.io/html-note/index.html#UCnR|uses cases and a lot of requirements> that are very useful. However, we believe that many of the HTML syntaxes proposed in the document can be best achieved through CSS mechanis…</blockquote>|
